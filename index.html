<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Ma console en ligne 🎮</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://luilautre.github.io/style.css">
</head>
<body>

<header id="site-header">
  <div id="buttons">
    <a href="/index.html"><p>Accueil</p></a>
    <a href="/message.html"><p>Messages</p></a>
    <a href="/share"><p>Fichiers</p></a>
    <a href="/games"><p>Jeux</p></a>
    <a href="/scratch-site"><p>Code</p></a>
  </div>
  <button id="theme-toggle" aria-label="Changer de thème" 
          style="
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: 2px solid var(--title-color);
            color: var(--title-color);
            border-radius: 50%;
            padding: 8px 10px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
          ">🌙</button>
</header>

<section style="display: flex; justify-content: center; margin-top: 20px;">
  <div id="games-menu">
    <h2>Choisis ton jeu :</h2>
    <a href="#" onclick="loadGame('roms/zelda-ocarina-of-time.n64','n64','Zelda: Ocarina of Time')">
      <p>Zelda: Ocarina of Time (N64)</p>
    </a>
    <a href="#" onclick="loadGame('roms/sonic-the-hedgehog-3.gen','segaMD','Sonic 3')">
      <p>Sonic the Hedgehog 3 (Mega Drive)</p>
    </a>
  </div>
</section>

<div id="game-container">
  <button id="quit" onclick="window.location.href='/games/'" 
          style="
            position: fixed;
            top: 70px;
            right: 20px;
            background-color: var(--title-color);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 10px 20px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            z-index: 10000;
            transition: background 0.2s, transform 0.2s;">
    ⏹ Quitter
  </button>
  <div id="game"></div>
</div>

<script src="/script.js"></script>
<script>
  EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";

  function loadGame(url, core, name) {
    document.getElementById("games-menu").style.display = "none";
    const gameContainer = document.getElementById("game-container");
    gameContainer.style.display = "block";
    document.getElementById("game").innerHTML = "";

    EJS_player = "#game";
    EJS_gameUrl = url;
    EJS_core = core;
    EJS_gameName = name;
    EJS_color = getComputedStyle(document.documentElement).getPropertyValue('--title-color').trim();
    EJS_startOnLoaded = true;

    const script = document.createElement("script");
    script.src = "https://cdn.emulatorjs.org/stable/data/loader.js";
    document.body.appendChild(script);
  }

  // 🌙 Bouton bascule clair/sombre
  const themeToggle = document.getElementById('theme-toggle');
  themeToggle.addEventListener('click', () => {
    const current = document.documentElement.getAttribute('data-theme');
    if(current === 'dark') {
      document.documentElement.removeAttribute('data-theme');
      themeToggle.textContent = '🌙';
    } else {
      document.documentElement.setAttribute('data-theme','dark');
      themeToggle.textContent = '☀️';
    }
  });
</script>
</body>
</html>
